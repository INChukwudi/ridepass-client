<!-- Sign In Modal-->
<ng-template #toggleFirstModal let-modal>
  <div class="modal-content">
    <div class="modal-header bg-secondary">
      <ul class="nav nav-tabs card-header-tabs" role="tablist" ngbNav #nav="ngbNav">
        <li [ngbNavItem]="1">
          <a ngbNavLink class="nav-link fw-medium">
            <i class="ci-unlocked me-2 mt-n1"></i>
            Sign in
          </a>

          <ng-template ngbNavContent>
            <form class="needs-validation tab-pane fade show active" autocomplete="off" [formGroup]="loginForm"
                  (ngSubmit)="onSubmit()">
              <div class="mb-3">
                <label class="form-label" for="si-email">Email address</label>
                <input class="form-control" type="email" id="si-email" placeholder="johndoe@example.com" required
                       formControlName="email" [ngClass]="{ 'is-invalid': submitted && f['email'].errors }">
                <div class="invalid-feedback">Please provide a valid email address.</div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="si-password">Password</label>
                <div class="password-toggle">
                  <input class="form-control" [type]="loginPassField ? 'text' : 'password'" id="si-password" required
                         formControlName="password" [ngClass]="{ 'is-invalid': submitted && f['password'].errors }">
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"
                          [ngClass]="{ 'mdi-eye-off-outline': !loginPassField, 'mdi-eye-outline': loginPassField }"
                          (click)="toggleLoginPassField()"></span>
                  </label>
                </div>
              </div>

              <div class="mb-3 d-flex flex-wrap justify-content-between">
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="si-remember">
                  <label class="form-check-label" for="si-remember">Remember me</label>
                </div>
                <a class="fs-sm" href="javascript:void(0);">Forgot password?</a>
              </div>

              <button class="btn btn-primary btn-shadow d-block w-100" type="submit">Sign in</button>
            </form>
          </ng-template>
        </li>

        <li [ngbNavItem]="2">
          <a ngbNavLink class="nav-link fw-medium">
            <i class="ci-user me-2 mt-n1"></i>
            Sign up
          </a>

          <ng-template ngbNavContent>
            <form class="needs-validation tab-pane fade show active" autocomplete="off" [formGroup]="SignupForm"
                  (ngSubmit)="SignupSubmit()">
              <div class="mb-3">
                <label class="form-label" for="su-name">First name</label>
                <input class="form-control" type="text" id="su-name" placeholder="John" required
                       formControlName="firstName" [ngClass]="{ 'is-invalid': submit && fa['firstName'].errors }">
                <div class="invalid-feedback">Please fill in your first name.</div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="sul-name">Last name</label>
                <input class="form-control" type="text" id="sul-name" placeholder="Doe" required
                       formControlName="lastName" [ngClass]="{ 'is-invalid': submit && fa['lastName'].errors }">
                <div class="invalid-feedback">Please fill in your last name.</div>
              </div>

              <div class="mb-3">
                <label for="su-email">Email address</label>
                <input class="form-control" type="email" id="su-email" placeholder="johndoe@example.com" required
                       formControlName="email" [ngClass]="{ 'is-invalid': submit && fa['email'].errors }">
                <div class="invalid-feedback">Please provide a valid email address.</div>
              </div>

              <div class="mb-3">
                <label for="su-phoneNumber">Phone Number</label>
                <input class="form-control" type="email" id="su-phoneNumber" placeholder="090889999" required
                       formControlName="phoneNumber" [ngClass]="{ 'is-invalid': submit && fa['phoneNumber'].errors }">
                <div class="invalid-feedback">Please provide a valid phone number.</div>
              </div>

              <div class="mb-3">
                <label for="su-username">Username</label>
                <input class="form-control" type="email" id="su-username" placeholder="johnDoe" required
                       formControlName="username" [ngClass]="{ 'is-invalid': submit && fa['username'].errors }">
                <div class="invalid-feedback">Please provide a valid username.</div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="su-password">Password</label>
                <div class="password-toggle">
                  <input class="form-control" [type]="signupPassField ? 'text' : 'password'" id="su-password" required
                         formControlName="password" [ngClass]="{ 'is-invalid': submit && fa['password'].errors }">
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"
                          [ngClass]="{ 'mdi-eye-off-outline': !signupPassField, 'mdi-eye-outline': signupPassField }"
                          (click)="toggleSignupPassField()"></span>
                  </label>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="su-password-confirm">Confirm password</label>
                <div class="password-toggle">
                  <input class="form-control" [type]="signupCPassField ? 'text' : 'password'" id="su-password-confirm" required>
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"
                          [ngClass]="{ 'mdi-eye-off-outline': !signupCPassField, 'mdi-eye-outline': loginPassField }"
                          (click)="toggleSignupCPassField()"></span>
                  </label>
                </div>
              </div>

              <button class="btn btn-primary btn-shadow d-block w-100" type="submit">Sign up</button>
            </form>
          </ng-template>
        </li>
      </ul>

      <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close" id="modal-close"
              (click)="modal.close()"></button>
    </div>

    <div class="modal-body tab-content py-4">
      <div [ngbNavOutlet]="nav" class="mt-2"></div>
    </div>
  </div>
</ng-template>

<!-- Navbar 3 Level (Light)-->
<header class="shadow-sm" (window:scroll)="windowScroll()" id="home">
  <!-- Remove "navbar-sticky" class to make navigation bar scrollable with the page.-->
  <div class="navbar-sticky bg-light">
    <div class="navbar navbar-expand-lg navbar-light">
      <div class="container">
        <a class="navbar-brand d-none d-sm-block flex-shrink-0" routerLink="/">
          <img src="assets/img/logo-mark.png" width="50" style="height: 30px" alt="RidePass">
        </a>
        <a class="navbar-brand d-sm-none flex-shrink-0 me-2" routerLink="/">
          <img src="assets/img/logo-mark.png" width="50" style="height: 30px" alt="RidePass">
        </a>
        <div class="input-group d-none d-lg-flex mx-4">
          <!--<input class="form-control rounded-end pe-5" type="text" placeholder="Search for products">
          <i class="ci-search position-absolute top-50 end-0 translate-middle-y text-muted fs-base me-3"></i>-->
          <app-menu></app-menu>
        </div>
        <div class="navbar-toolbar d-flex flex-shrink-0 align-items-center">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                  (click)="collapse.toggle()">
            <span class="navbar-toggler-icon"></span>
          </button>
          <!--<a class="navbar-tool navbar-stuck-toggler" href="javascript:void(0);" (click)="menuShow()">
            <span class="navbar-tool-tooltip">Expand menu</span>
            <div class="navbar-tool-icon-box">
              <i class="navbar-tool-icon ci-menu"></i>
            </div>
          </a>-->
          <a class="navbar-tool ms-1 ms-lg-0 me-n1 me-lg-2" href="javascript:void(0);" data-bs-toggle="modal"
               (click)="toggleModal(toggleFirstModal)" *ngIf="(authService.currentUser$ | async) == null">
            <div class="navbar-tool-icon-box">
              <i class="navbar-tool-icon ci-user"></i>
            </div>
            <div class="navbar-tool-text ms-n3">
              <small>Hello, Sign in</small> My Account
            </div>
          </a>
          <a class="navbar-tool ms-1 ms-lg-0 me-n1 me-lg-2" routerLink="/account/transactions"
             *ngIf="(authService.currentUser$ | async) != null">
            <div class="navbar-tool-icon-box">
              <i class="navbar-tool-icon ci-user"></i>
            </div>
            <div class="navbar-tool-text ms-n3">
              <small>View Details</small> My Account
            </div>
          </a>
          <!--<div class="navbar-tool dropdown ms-3">
            <a class="navbar-tool-icon-box bg-secondary dropdown-toggle" routerLink="/shop/cart">
              <span class="navbar-tool-label">{{cartData.length}}</span>
              <i class="navbar-tool-icon ci-cart"></i>
            </a>
            <a class="navbar-tool-text price" routerLink="/shop/cart">
              <small>My Cart</small>${{calculateTotal(subTotal)}}</a>
              &lt;!&ndash; Cart dropdown&ndash;&gt;
              <div class="dropdown-menu dropdown-menu-end">
                <div class="widget widget-cart px-3 pt-2 pb-3" style="width:20rem;">
                  <div style="height: 15rem; overflow-x: hidden;" data-simplebar data-simplebar-auto-hide="false">
                    <div class="widget-cart-item pb-2 border-bottom" *ngFor="let data of cartData; let i= index">
                      <button class="btn-close text-danger" type="button" aria-label="Remove" (click)="remove(i)">
                        <span aria-hidden="true">&times;</span>
                      </button>
                      <div class="d-flex align-items-center">
                        <a class="flex-shrink-0" routerLink="/shop/single-v1">
                          <img src="{{data.image}}" width="64" alt="Product">
                        </a>
                        <div class="ps-2">
                          <h6 class="widget-product-title">
                            <a routerLink="/shop/single-v1">{{data.name}}</a>
                          </h6>
                          <div class="widget-product-meta">
                            <span class="text-accent me-2">${{data.price}}</span><span
                            class="text-muted">x 1</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="d-flex flex-wrap justify-content-between align-items-center py-3">
                    <div class="fs-sm me-2 py-2">
                      <span class="text-muted">Subtotal:</span>
                      <span class="text-accent fs-base ms-1 price">${{calculateTotal(subTotal)}}</span>
                    </div>
                    <a class="btn btn-outline-secondary btn-sm" routerLink="/shop/cart">
                      Expand cart <i class="ci-arrow-right ms-1 me-n1"></i>
                    </a>
                  </div>
                  <a class="btn btn-primary btn-sm d-block w-100" routerLink="/shop/checkout-details">
                    <i class="ci-card me-2 fs-base align-middle"></i>Checkout
                  </a>
                </div>
              </div>
          </div>-->
        </div>
      </div>
    </div>

    <div class="navbar navbar-expand-lg navbar-light navbar-stuck-menu mt-n2 pt-0 pb-2 d-md-none">
      <div class="container">
        <div class="collapse navbar-collapse" id="navbarCollapse" #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
          <!-- Search-->
          <!--<div class="input-group d-lg-none my-3">
            <i class="ci-search position-absolute top-50 start-0 translate-middle-y text-muted fs-base ms-3"></i>
            <input class="form-control rounded-start" type="text" placeholder="Search for products">
          </div>-->
          <!-- Primary menu-->
          <app-menu></app-menu>
        </div>
      </div>
    </div>
  </div>
</header>
<!-- Hero slider-->

